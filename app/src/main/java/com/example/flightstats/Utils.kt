package com.example.flightstats

import android.content.Context
import android.util.Log
import com.example.flightstats.data.Airport
import com.google.gson.Gson
import com.google.gson.JsonArray
import com.google.gson.JsonParser
import org.apache.commons.io.IOUtils
import org.json.JSONArray
import java.io.*
import java.nio.charset.Charset



/**
 * Created by sergio on 2019-11-10
 */

const val TAG: String = "Utils"

class Utils private constructor() {

    companion object {

        fun generateAirportList(): List<Airport>{
            val airportList = ArrayList<Airport>()

            for (airportObject in getAirportsListJson()) {
                airportList.add(Gson().fromJson(airportObject.asJsonObject, Airport::class.java))
            }

            return airportList
        }

        fun getAirportsListJson() : JsonArray{
            var input: InputStream? = null
            input = FlightApplication.appAssetManager.open("airports.json")
                    val parser = JsonParser()
            val jsonElement = parser.parse(getTextFromStream(input))
            return jsonElement.asJsonArray
        }


        fun getText(filename: String): String? {
            val f = File(getRootDirectory(), filename)

            return getTextFromfile(f)
        }

        fun getTextFromfile(f: File): String? {
            var content: String? = null
            val filename = f.name

            if (f.exists()) {
                try {
                    val inputStream = FileInputStream(f)

                    content = getTextFromStream(inputStream)
                } catch (e: Exception) {
                    Log.e(TAG, "Error while opening to open text file in cache :$filename", e)
                }

            } else {
                Log.e(TAG, "Text file does not exist in cache :$filename")
            }

            return content;
        }

        fun getTextFromStream(inputStream: InputStream): String? {
            return try {
                val writer = StringWriter()
                IOUtils.copy(inputStream, writer, Charset.forName("UTF-8"))
                writer.toString()
            } catch (e: Exception) {
                Log.e(TAG, "Can't read text from stream", e)
                null
            }

        }

        private fun getRootDirectory(): File {
            return FlightApplication.appContext!!.getDir("appCache", Context.MODE_PRIVATE);
        }

        fun _saveData(data: ByteArray, filename: String): Boolean {
            try {
                val f = File(getRootDirectory(), "tempsJson")

                val fos = FileOutputStream(f)
                fos.write(data)
                fos.close()
                Log.i(TAG, "File written to disk (${f.getAbsolutePath()}")

                return true
            } catch (e: Exception) {
                Log.e(TAG, "Impossible to save  $filename", e)
                return false
            }
        }

        fun _makeJsonAirportLight() {
            var input: InputStream? = null

            input = FlightApplication.appAssetManager.open("[\n   {\n      \"code\":\"AGP\",\n      \"lat\":\"36.6749\",\n      \"lon\":\"-4.49298\",\n      \"name\":\"Malaga Airport\",\n      \"city\":\"Malaga\",\n      \"state\":\"Andalucia\",\n      \"country\":\"Spain\",\n      \"woeid\":\"23232917\",\n      \"tz\":\"Europe\\/Madrid\",\n      \"phone\":\"+34 952 048 838\",\n      \"type\":\"Airports\",\n      \"email\":\"\",\n      \"url\":\"http:\\/\\/www.aena.es\\/csee\\/Satellite?cid=1048858947193&pagename=Est\",\n      \"runway_length\":\"10500\",\n      \"elev\":\"52\",\n      \"icao\":\"LEMG\",\n      \"direct_flights\":\"106\",\n      \"carriers\":\"59\"\n   },\n   {\n      \"code\":\"AMS\",\n      \"lat\":\"52.3122\",\n      \"lon\":\"4.77511\",\n      \"name\":\"Schiphol Airport\",\n      \"city\":\"Schiphol Zuid\",\n      \"state\":\"North Holland\",\n      \"country\":\"Netherlands\",\n      \"woeid\":\"22386730\",\n      \"tz\":\"Europe\\/Amsterdam\",\n      \"phone\":\"+31-207940800\",\n      \"type\":\"Airports\",\n      \"email\":\"\",\n      \"url\":\"http:\\/\\/www.schiphol.com\\/\",\n      \"runway_length\":\"12467\",\n      \"elev\":\"-11\",\n      \"icao\":\"EHAM\",\n      \"direct_flights\":\"284\",\n      \"carriers\":\"118\"\n   },\n   {\n      \"code\":\"ARN\",\n      \"lat\":\"59.6521\",\n      \"lon\":\"17.9317\",\n      \"name\":\"Arlanda Airport\",\n      \"city\":\"Märst\",\n      \"state\":\"Stockholm\",\n      \"country\":\"Sweden\",\n      \"woeid\":\"12517610\",\n      \"tz\":\"Europe\\/Stockholm\",\n      \"phone\":\"+46 8 797 6000\",\n      \"type\":\"Airports\",\n      \"email\":\"\",\n      \"url\":\"http:\\/\\/www.arlanda.se\",\n      \"runway_length\":\"10827\",\n      \"elev\":\"123\",\n      \"icao\":\"ESSA\",\n      \"direct_flights\":\"126\",\n      \"carriers\":\"76\"\n   },\n   {\n      \"code\":\"ATH\",\n      \"lat\":\"37.8937\",\n      \"lon\":\"23.7235\",\n      \"name\":\"Eleftherios Venizelos International Airport\",\n      \"city\":\"Athens\",\n      \"state\":\"Attiki\",\n      \"country\":\"Greece\",\n      \"woeid\":\"12513286\",\n      \"tz\":\"Europe\\/Athens\",\n      \"phone\":\"0030 210 353 0001\",\n      \"type\":\"Airports\",\n      \"email\":\"\",\n      \"url\":\"http:\\/\\/www.aia.gr\",\n      \"runway_length\":\"13123\",\n      \"elev\":\"308\",\n      \"icao\":\"LGAV\",\n      \"direct_flights\":\"117\",\n      \"carriers\":\"81\"\n   },\n   {\n      \"code\":\"ATL\",\n      \"lat\":\"33.6558\",\n      \"lon\":\"-84.4333\",\n      \"name\":\"Hartsfield-Jackson Atlanta International Airport\",\n      \"city\":\"Atlanta\",\n      \"state\":\"Georgia\",\n      \"country\":\"United States\",\n      \"woeid\":\"12522118\",\n      \"tz\":\"America\\/New_York\",\n      \"phone\":\"(654) 57 8833\",\n      \"type\":\"Airports\",\n      \"email\":\"\",\n      \"url\":\"http:\\/\\/www.atlanta-airport.com\\/\",\n      \"runway_length\":\"11889\",\n      \"elev\":\"1026\",\n      \"icao\":\"KATL\",\n      \"direct_flights\":\"253\",\n      \"carriers\":\"60\"\n   },\n   {\n      \"code\":\"BCN\",\n      \"lat\":\"41.3006\",\n      \"lon\":\"2.07976\",\n      \"name\":\"Barcelona International Airport\",\n      \"city\":\"El Prat de Llobregat\",\n      \"state\":\"Catalonia\",\n      \"country\":\"Spain\",\n      \"woeid\":\"22411879\",\n      \"tz\":\"Europe\\/Madrid\",\n      \"phone\":\"\",\n      \"type\":\"Airports\",\n      \"email\":\"\",\n      \"url\":\"http:\\/\\/www.aena.es\",\n      \"runway_length\":\"11001\",\n      \"elev\":\"15\",\n      \"icao\":\"LEBL\",\n      \"direct_flights\":\"145\",\n      \"carriers\":\"90\"\n   },\n   {\n      \"code\":\"BHX\",\n      \"lat\":\"52.4531\",\n      \"lon\":\"-1.73847\",\n      \"name\":\"Birmingham International Airport\",\n      \"city\":\"Birmingham\",\n      \"state\":\"England\",\n      \"country\":\"United Kingdom\",\n      \"woeid\":\"22454274\",\n      \"tz\":\"Europe\\/London\",\n      \"phone\":\"+44 (0)8707 335511\",\n      \"type\":\"Airports\",\n      \"email\":\"\",\n      \"url\":\"http:\\/\\/www.bhx.co.uk\\/\",\n      \"runway_length\":\"7398\",\n      \"elev\":\"325\",\n      \"icao\":\"EGBB\",\n      \"direct_flights\":\"103\",\n      \"carriers\":\"45\"\n   },\n   {\n      \"code\":\"BKK\",\n      \"lat\":\"13.9144\",\n      \"lon\":\"100.608\",\n      \"name\":\"Bangkok International Airport\",\n      \"city\":\"Lak Si\",\n      \"state\":\"Bangkok\",\n      \"country\":\"Thailand\",\n      \"woeid\":\"12517747\",\n      \"tz\":\"Asia\\/Bangkok\",\n      \"phone\":\"\",\n      \"type\":\"Airports\",\n      \"email\":\"\",\n      \"url\":\"http:\\/\\/www.airportthai.co.th\\/airportnew\\/bia\\/html\\/\",\n      \"runway_length\":\"12139\",\n      \"elev\":\"12\",\n      \"icao\":\"VTBS\",\n      \"direct_flights\":\"132\",\n      \"carriers\":\"113\"\n   },\n   {\n      \"code\":\"BOS\",\n      \"lat\":\"42.3717\",\n      \"lon\":\"-71.0281\",\n      \"name\":\"Gen E L Logan International Airport\",\n      \"city\":\"Boston\",\n      \"state\":\"Massachusetts\",\n      \"country\":\"United States\",\n      \"woeid\":\"12519874\",\n      \"tz\":\"America\\/New_York\",\n      \"phone\":\"\",\n      \"type\":\"Airports\",\n      \"email\":\"\",\n      \"url\":\"\",\n      \"runway_length\":\"10081\",\n      \"elev\":\"20\",\n      \"icao\":\"KBOS\",\n      \"direct_flights\":\"113\",\n      \"carriers\":\"68\"\n   },\n   {\n      \"code\":\"BRU\",\n      \"lat\":\"50.899\",\n      \"lon\":\"4.4859\",\n      \"name\":\"Brussels Airport\",\n      \"city\":\"Bruxelles\",\n      \"state\":\"Vlaams Brabant\",\n      \"country\":\"Belgium\",\n      \"woeid\":\"22103751\",\n      \"tz\":\"Europe\\/Brussels\",\n      \"phone\":\"+32 (0) 900 7 0000\",\n      \"type\":\"Airports\",\n      \"email\":\"\",\n      \"url\":\"http:\\/\\/www.brusselsairport.be\",\n      \"runway_length\":\"9790\",\n      \"elev\":\"184\",\n      \"icao\":\"EBBR\",\n      \"direct_flights\":\"186\",\n      \"carriers\":\"97\"\n   },\n   {\n      \"code\":\"BUD\",\n      \"lat\":\"47.4453\",\n      \"lon\":\"19.2195\",\n      \"name\":\"Ferihegy Airport\",\n      \"city\":\"Budapest\",\n      \"state\":\"Budapest\",\n      \"country\":\"Hungary\",\n      \"woeid\":\"12513389\",\n      \"tz\":\"Europe\\/Budapest\",\n      \"phone\":\"(36) 1 2969696\",\n      \"type\":\"Airports\",\n      \"email\":\"\",\n      \"url\":\"http:\\/\\/www.bud.hu\",\n      \"runway_length\":\"9875\",\n      \"elev\":\"440\",\n      \"icao\":\"LHBP\",\n      \"direct_flights\":\"102\",\n      \"carriers\":\"64\"\n   },\n   {\n      \"code\":\"CAN\",\n      \"lat\":\"23.3925\",\n      \"lon\":\"113.299\",\n      \"name\":\"Baiyun Airport\",\n      \"city\":\"Guangzhou\",\n      \"state\":\"Guangdong\",\n      \"country\":\"China\",\n      \"woeid\":\"12511984\",\n      \"tz\":\"Asia\\/Chongqing\",\n      \"phone\":\"0086-020-86120000\",\n      \"type\":\"Airports\",\n      \"email\":\"\",\n      \"url\":\"\",\n      \"runway_length\":\"11000\",\n      \"elev\":\"45\",\n      \"icao\":\"ZGGG\",\n      \"direct_flights\":\"111\",\n      \"carriers\":\"49\"\n   },\n   {\n      \"code\":\"CDG\",\n      \"lat\":\"49.0175\",\n      \"lon\":\"2.5564\",\n      \"name\":\"Charles de Gaulle International Airport\",\n      \"city\":\"Le Mesnil-Amelot\",\n      \"state\":\"Ile-de-France\",\n      \"country\":\"France\",\n      \"woeid\":\"22140453\",\n      \"tz\":\"Europe\\/Paris\",\n      \"phone\":\"\",\n      \"type\":\"Airports\",\n      \"email\":\"\",\n      \"url\":\"\",\n      \"runway_length\":\"11811\",\n      \"elev\":\"387\",\n      \"icao\":\"LFPG\",\n      \"direct_flights\":\"310\",\n      \"carriers\":\"131\"\n   },\n   {\n      \"code\":\"CGN\",\n      \"lat\":\"50.8784\",\n      \"lon\":\"7.12293\",\n      \"name\":\"Cologne Bonn Airport\",\n      \"city\":\"Cologne\",\n      \"state\":\"North Rhine-Westphalia\",\n      \"country\":\"Germany\",\n      \"woeid\":\"23030981\",\n      \"tz\":\"Europe\\/Berlin\",\n      \"phone\":\"\",\n      \"type\":\"Airports\",\n      \"email\":\"\",\n      \"url\":\"http:\\/\\/www.koeln-bonn-airport.de\\/index.php\",\n      \"runway_length\":\"12467\",\n      \"elev\":\"300\",\n      \"icao\":\"EDDK\",\n      \"direct_flights\":\"129\",\n      \"carriers\":\"45\"\n   },\n   {\n      \"code\":\"CLE\",\n      \"lat\":\"41.4115\",\n      \"lon\":\"-81.8339\",\n      \"name\":\"Hopkins International Airport\",\n      \"city\":\"Cleveland\",\n      \"state\":\"Ohio\",\n      \"country\":\"United States\",\n      \"woeid\":\"12520226\",\n      \"tz\":\"America\\/New_York\",\n      \"phone\":\"\",\n      \"type\":\"Airports\",\n      \"email\":\"\",\n      \"url\":\"\",\n      \"runway_length\":\"8998\",\n      \"elev\":\"792\",\n      \"icao\":\"KCLE\",\n      \"direct_flights\":\"102\",\n      \"carriers\":\"44\"\n   },\n   {\n      \"code\":\"CLT\",\n      \"lat\":\"35.2226\",\n      \"lon\":\"-80.946\",\n      \"name\":\"Douglas International Airport\",\n      \"city\":\"Charlotte\",\n      \"state\":\"North Carolina\",\n      \"country\":\"United States\",\n      \"woeid\":\"12519519\",\n      \"tz\":\"America\\/New_York\",\n      \"phone\":\"\",\n      \"type\":\"Airports\",\n      \"email\":\"\",\n      \"url\":\"http:\\/\\/www.charmeck.org\\/Departments\\/Airport\\/Home.htm\",\n      \"runway_length\":\"10000\",\n      \"elev\":\"749\",\n      \"icao\":\"KCLT\",\n      \"direct_flights\":\"133\",\n      \"carriers\":\"39\"\n   },\n   {\n      \"code\":\"CPH\",\n      \"lat\":\"55.6205\",\n      \"lon\":\"12.6495\",\n      \"name\":\"Copenhagen Airport\",\n      \"city\":\"Kastrup\",\n      \"state\":\"Hovedstaden\",\n      \"country\":\"Denmark\",\n      \"woeid\":\"22851127\",\n      \"tz\":\"Europe\\/Copenhagen\",\n      \"phone\":\"\",\n      \"type\":\"Airports\",\n      \"email\":\"\",\n      \"url\":\"http:\\/\\/www.cph.dk\",\n      \"runway_length\":\"11811\",\n      \"elev\":\"17\",\n      \"icao\":\"EKCH\",\n      \"direct_flights\":\"136\",\n      \"carriers\":\"76\"\n   },\n   {\n      \"code\":\"CVG\",\n      \"lat\":\"39.0571\",\n      \"lon\":\"-84.6625\",\n      \"name\":\"Greater Cincinnati International Airport\",\n      \"city\":\"Hebron\",\n      \"state\":\"Ohio\",\n      \"country\":\"United States\",\n      \"woeid\":\"12519978\",\n      \"tz\":\"America\\/New_York\",\n      \"phone\":\"\",\n      \"type\":\"Airports\",\n      \"email\":\"\",\n      \"url\":\"\",\n      \"runway_length\":\"9501\",\n      \"elev\":\"891\",\n      \"icao\":\"KCVG\",\n      \"direct_flights\":\"115\",\n      \"carriers\":\"39\"\n   },\n   {\n      \"code\":\"DEN\",\n      \"lat\":\"39.8396\",\n      \"lon\":\"-104.672\",\n      \"name\":\"Denver International Airport\",\n      \"city\":\"Denver\",\n      \"state\":\"Colorado\",\n      \"country\":\"United States\",\n      \"woeid\":\"12523052\",\n      \"tz\":\"America\\/Denver\",\n      \"phone\":\"\",\n      \"type\":\"Airports\",\n      \"email\":\"\",\n      \"url\":\"\",\n      \"runway_length\":\"12000\",\n      \"elev\":\"5333\",\n      \"icao\":\"KDEN\",\n      \"direct_flights\":\"162\",\n      \"carriers\":\"57\"\n   },\n   {\n      \"code\":\"DFW\",\n      \"lat\":\"32.9222\",\n      \"lon\":\"-97.0409\",\n      \"name\":\"Fort Worth International Airport\",\n      \"city\":\"Dallas\",\n      \"state\":\"Texas\",\n      \"country\":\"United States\",\n      \"woeid\":\"12519786\",\n      \"tz\":\"America\\/Chicago\",\n      \"phone\":\"\",\n      \"type\":\"Airports\",\n      \"email\":\"\",\n      \"url\":\"\",\n      \"runway_length\":\"11388\",\n      \"elev\":\"603\",\n      \"icao\":\"KDFW\",\n      \"direct_flights\":\"179\",\n      \"carriers\":\"62\"\n   },\n   {\n      \"code\":\"DME\",\n      \"lat\":\"55.4025\",\n      \"lon\":\"37.9136\",\n      \"name\":\"Domodedovo Airport\",\n      \"city\":\"Podol'sk\",\n      \"state\":\"Moskovskaya Oblast\",\n      \"country\":\"Russia\",\n      \"woeid\":\"12515946\",\n      \"tz\":\"Europe\\/Moscow\",\n      \"phone\":\"\",\n      \"type\":\"Airports\",\n      \"email\":\"\",\n      \"url\":\"http:\\/\\/www.domodedovo.ru\",\n      \"runway_length\":null,\n      \"elev\":\"512\",\n      \"icao\":\"UUDD\",\n      \"direct_flights\":\"165\",\n      \"carriers\":\"71\"\n   },\n   {\n      \"code\":\"DTW\",\n      \"lat\":\"42.2327\",\n      \"lon\":\"-83.3412\",\n      \"name\":\"Detroit Metropolitan Wayne County Airport\",\n      \"city\":\"Detroit\",\n      \"state\":\"Michigan\",\n      \"country\":\"United States\",\n      \"woeid\":\"12519481\",\n      \"tz\":\"America\\/New_York\",\n      \"phone\":\"\",\n      \"type\":\"Airports\",\n      \"email\":\"\",\n      \"url\":\"http:\\/\\/www.metroairport.com\\/\",\n      \"runway_length\":\"10501\",\n      \"elev\":\"639\",\n      \"icao\":\"KDTW\",\n      \"direct_flights\":\"161\",\n      \"carriers\":\"45\"\n   },\n   {\n      \"code\":\"DUB\",\n      \"lat\":\"53.4272\",\n      \"lon\":\"-6.24418\",\n      \"name\":\"Dublin Airport\",\n      \"city\":\"Cloghran\",\n      \"state\":\"\",\n      \"country\":\"Ireland\",\n      \"woeid\":\"23388266\",\n      \"tz\":\"Europe\\/Dublin\",\n      \"phone\":\"+353 1 8141111\",\n      \"type\":\"Airports\",\n      \"email\":\"\",\n      \"url\":\"http:\\/\\/www.dub.aero\",\n      \"runway_length\":\"7499\",\n      \"elev\":\"222\",\n      \"icao\":\"EIDW\",\n      \"direct_flights\":\"167\",\n      \"carriers\":\"54\"\n   },\n   {\n      \"code\":\"DUS\",\n      \"lat\":\"51.2794\",\n      \"lon\":\"6.76481\",\n      \"name\":\"Dusseldorf International Airport\",\n      \"city\":\"Dusseldorf\",\n      \"state\":\"North Rhine-Westphalia\",\n      \"country\":\"Germany\",\n      \"woeid\":\"23024911\",\n      \"tz\":\"Europe\\/Berlin\",\n      \"phone\":\"\",\n      \"type\":\"Airports\",\n      \"email\":\"\",\n      \"url\":\"http:\\/\\/www.duesseldorf-international.de\\/\",\n      \"runway_length\":\"9842\",\n      \"elev\":\"147\",\n      \"icao\":\"EDDL\",\n      \"direct_flights\":\"167\",\n      \"carriers\":\"74\"\n   },\n   {\n      \"code\":\"DXB\",\n      \"lat\":\"25.2509\",\n      \"lon\":\"55.3629\",\n      \"name\":\"Dubai International Airport\",\n      \"city\":\"Dubai\",\n      \"state\":\"Dubai\",\n      \"country\":\"United Arab Emirates\",\n      \"woeid\":\"23388362\",\n      \"tz\":\"Asia\\/Dubai\",\n      \"phone\":\"+971 4 216 2525\",\n      \"type\":\"Airports\",\n      \"email\":\"\",\n      \"url\":\"http:\\/\\/www.dubaiairport.com\",\n      \"runway_length\":\"13123\",\n      \"elev\":\"34\",\n      \"icao\":\"OMDB\",\n      \"direct_flights\":\"170\",\n      \"carriers\":\"126\"\n   },\n   {\n      \"code\":\"EWR\",\n      \"lat\":\"40.6924\",\n      \"lon\":\"-74.1843\",\n      \"name\":\"Newark International Airport\",\n      \"city\":\"Newark\",\n      \"state\":\"New Jersey\",\n      \"country\":\"United States\",\n      \"woeid\":\"12521127\",\n      \"tz\":\"America\\/New_York\",\n      \"phone\":\"\",\n      \"type\":\"Airports\",\n      \"email\":\"\",\n      \"url\":\"\",\n      \"runway_length\":\"11000\",\n      \"elev\":\"18\",\n      \"icao\":\"KEWR\",\n      \"direct_flights\":\"220\",\n      \"carriers\":\"64\"\n   },\n   {\n      \"code\":\"FCO\",\n      \"lat\":\"41.8026\",\n      \"lon\":\"12.2551\",\n      \"name\":\"Leonardo da Vinci International Airport\",\n      \"city\":\"Rome\",\n      \"state\":\"Lazio\",\n      \"country\":\"Italy\",\n      \"woeid\":\"22318195\",\n      \"tz\":\"Europe\\/Rome\",\n      \"phone\":\"+39 06 65951\",\n      \"type\":\"Airports\",\n      \"email\":\"\",\n      \"url\":\"http:\\/\\/www.adr.it\\/\",\n      \"runway_length\":\"12795\",\n      \"elev\":\"14\",\n      \"icao\":\"LIRF\",\n      \"direct_flights\":\"181\",\n      \"carriers\":\"124\"\n   },\n   {\n      \"code\":\"FLL\",\n      \"lat\":\"26.0722\",\n      \"lon\":\"-80.1354\",\n      \"name\":\"Fort Lauderdale Hollywood International Airport\",\n      \"city\":\"Dania Beach\",\n      \"state\":\"Florida\",\n      \"country\":\"United States\",\n      \"woeid\":\"12519836\",\n      \"tz\":\"America\\/New_York\",\n      \"phone\":\"\",\n      \"type\":\"Airports\",\n      \"email\":\"\",\n      \"url\":\"\",\n      \"runway_length\":\"9001\",\n      \"elev\":\"11\",\n      \"icao\":\"KFLL\",\n      \"direct_flights\":\"108\",\n      \"carriers\":\"46\"\n   },\n   {\n      \"code\":\"FRA\",\n      \"lat\":\"50.0483\",\n      \"lon\":\"8.57041\",\n      \"name\":\"Frankfurt International Airport\",\n      \"city\":\"Frankfurt\",\n      \"state\":\"Hesse\",\n      \"country\":\"Germany\",\n      \"woeid\":\"22981759\",\n      \"tz\":\"Europe\\/Berlin\",\n      \"phone\":\"+49 69 690 0\",\n      \"type\":\"Airports\",\n      \"email\":\"\",\n      \"url\":\"http:\\/\\/www.airportcity-frankfurt.de\",\n      \"runway_length\":\"13123\",\n      \"elev\":\"364\",\n      \"icao\":\"EDDF\",\n      \"direct_flights\":\"337\",\n      \"carriers\":\"131\"\n   },\n   {\n      \"code\":\"GVA\",\n      \"lat\":\"46.2329\",\n      \"lon\":\"6.10682\",\n      \"name\":\"Geneva Airport\",\n      \"city\":\"Geneva\",\n      \"state\":\"Canton of Geneva\",\n      \"country\":\"Switzerland\",\n      \"woeid\":\"23365569\",\n      \"tz\":\"Europe\\/Zurich\",\n      \"phone\":\"+41 22 717 71 11\",\n      \"type\":\"Airports\",\n      \"email\":\"\",\n      \"url\":\"http:\\/\\/www.gva.ch\",\n      \"runway_length\":\"12796\",\n      \"elev\":\"1411\",\n      \"icao\":\"LSGG\",\n      \"direct_flights\":\"122\",\n      \"carriers\":\"71\"\n   },\n   {\n      \"code\":\"HAM\",\n      \"lat\":\"53.6321\",\n      \"lon\":\"10.0042\",\n      \"name\":\"Hamburg Airport\",\n      \"city\":\"Hamburg\",\n      \"state\":\"Hamburg\",\n      \"country\":\"Germany\",\n      \"woeid\":\"22211603\",\n      \"tz\":\"Europe\\/Berlin\",\n      \"phone\":\"+49 (0)40\\/5075-0\",\n      \"type\":\"Airports\",\n      \"email\":\"\",\n      \"url\":\"http:\\/\\/www.hamburg-airport.de\",\n      \"runway_length\":\"12024\",\n      \"elev\":\"53\",\n      \"icao\":\"EDDH\",\n      \"direct_flights\":\"112\",\n      \"carriers\":\"75\"\n   },\n   {\n      \"code\":\"HEL\",\n      \"lat\":\"60.3243\",\n      \"lon\":\"24.9688\",\n      \"name\":\"Helsinki Vantaa Airport\",\n      \"city\":\"Vantaa\",\n      \"state\":\"Southern Finland\",\n      \"country\":\"Finland\",\n      \"woeid\":\"12512766\",\n      \"tz\":\"Europe\\/Helsinki\",\n      \"phone\":\"+358 200 14636\",\n      \"type\":\"Airports\",\n      \"email\":\"\",\n      \"url\":\"http:\\/\\/www.helsinki-vantaa.fi\\/\",\n      \"runway_length\":\"11286\",\n      \"elev\":\"179\",\n      \"icao\":\"EFHK\",\n      \"direct_flights\":\"104\",\n      \"carriers\":\"53\"\n   },\n   {\n      \"code\":\"HKG\",\n      \"lat\":\"22.3124\",\n      \"lon\":\"113.929\",\n      \"name\":\"Hong Kong International Airport\",\n      \"city\":\"Hong Kong\",\n      \"state\":\"Hong Kong Island\",\n      \"country\":\"Hong Kong\",\n      \"woeid\":\"24875607\",\n      \"tz\":\"Asia\\/Hong_Kong\",\n      \"phone\":\"+852 2188 7111\",\n      \"type\":\"Airports\",\n      \"email\":\"\",\n      \"url\":\"http:\\/\\/www.hongkongairport.com\\/\",\n      \"runway_length\":\"12467\",\n      \"elev\":\"19\",\n      \"icao\":\"VHHH\",\n      \"direct_flights\":\"131\",\n      \"carriers\":\"87\"\n   },\n   {\n      \"code\":\"IAD\",\n      \"lat\":\"38.9556\",\n      \"lon\":\"-77.4484\",\n      \"name\":\"Dulles International Airport\",\n      \"city\":\"Washington\",\n      \"state\":\"Virginia\",\n      \"country\":\"United States\",\n      \"woeid\":\"12519544\",\n      \"tz\":\"America\\/New_York\",\n      \"phone\":\"703-572-6001\",\n      \"type\":\"Airports\",\n      \"email\":\"\",\n      \"url\":\"http:\\/\\/www.metwashairports.com\\/Dulles\\/\",\n      \"runway_length\":\"11501\",\n      \"elev\":\"313\",\n      \"icao\":\"KIAD\",\n      \"direct_flights\":\"150\",\n      \"carriers\":\"63\"\n   },\n   {\n      \"code\":\"IAH\",\n      \"lat\":\"29.9784\",\n      \"lon\":\"-95.3424\",\n      \"name\":\"George Bush Intercontinental Airport\",\n      \"city\":\"Houston\",\n      \"state\":\"Texas\",\n      \"country\":\"United States\",\n      \"woeid\":\"12520245\",\n      \"tz\":\"America\\/Chicago\",\n      \"phone\":\"\",\n      \"type\":\"Airports\",\n      \"email\":\"\",\n      \"url\":\"\",\n      \"runway_length\":\"12001\",\n      \"elev\":\"98\",\n      \"icao\":\"KIAH\",\n      \"direct_flights\":\"210\",\n      \"carriers\":\"54\"\n   },\n   {\n      \"code\":\"ICN\",\n      \"lat\":\"37.4534\",\n      \"lon\":\"126.657\",\n      \"name\":\"New Incheon International Airport\",\n      \"city\":\"Incheon\",\n      \"state\":\"Incheon\",\n      \"country\":\"South Korea\",\n      \"woeid\":\"24554859\",\n      \"tz\":\"Asia\\/Seoul\",\n      \"phone\":\"\",\n      \"type\":\"Airports\",\n      \"email\":\"\",\n      \"url\":\"http:\\/\\/www.airport.or.kr\\/eng\\/airport\\/\",\n      \"runway_length\":\"12300\",\n      \"elev\":\"6\",\n      \"icao\":\"RKSI\",\n      \"direct_flights\":\"139\",\n      \"carriers\":\"76\"\n   },\n   {\n      \"code\":\"IST\",\n      \"lat\":\"40.9857\",\n      \"lon\":\"28.8163\",\n      \"name\":\"Ataturk Hava Limani Airport\",\n      \"city\":\"Bakırköy\",\n      \"state\":\"Istanbul\",\n      \"country\":\"Turkey\",\n      \"woeid\":\"23388365\",\n      \"tz\":\"Europe\\/Istanbul\",\n      \"phone\":\"\",\n      \"type\":\"Airports\",\n      \"email\":\"\",\n      \"url\":\"\",\n      \"runway_length\":\"9842\",\n      \"elev\":\"157\",\n      \"icao\":\"LTBA\",\n      \"direct_flights\":\"157\",\n      \"carriers\":\"79\"\n   },\n   {\n      \"code\":\"JED\",\n      \"lat\":\"21.706\",\n      \"lon\":\"39.1386\",\n      \"name\":\"King Abdul Aziz International Airport\",\n      \"city\":\"Jeddah\",\n      \"state\":\"Makka\",\n      \"country\":\"Saudi Arabia\",\n      \"woeid\":\"23388353\",\n      \"tz\":\"Asia\\/Riyadh\",\n      \"phone\":\"\",\n      \"type\":\"Airports\",\n      \"email\":\"\",\n      \"url\":\"\",\n      \"runway_length\":\"12467\",\n      \"elev\":\"48\",\n      \"icao\":\"OEJN\",\n      \"direct_flights\":\"106\",\n      \"carriers\":\"54\"\n   },\n   {\n      \"code\":\"JFK\",\n      \"lat\":\"40.6437\",\n      \"lon\":\"-73.79\",\n      \"name\":\"John F Kennedy International Airport\",\n      \"city\":\"Jamaica\",\n      \"state\":\"New York\",\n      \"country\":\"United States\",\n      \"woeid\":\"12520380\",\n      \"tz\":\"America\\/New_York\",\n      \"phone\":\"\",\n      \"type\":\"Airports\",\n      \"email\":\"\",\n      \"url\":\"\",\n      \"runway_length\":\"14572\",\n      \"elev\":\"13\",\n      \"icao\":\"KJFK\",\n      \"direct_flights\":\"233\",\n      \"carriers\":\"100\"\n   },\n   {\n      \"code\":\"KUL\",\n      \"lat\":\"2.77859\",\n      \"lon\":\"101.689\",\n      \"name\":\"Kuala Lumpur International Airport\",\n      \"city\":\"Sepang\",\n      \"state\":\"Putrajaya\",\n      \"country\":\"Malaysia\",\n      \"woeid\":\"28752278\",\n      \"tz\":\"Asia\\/Kuala_Lumpur\",\n      \"phone\":\"+603 8776 4386\",\n      \"type\":\"Airports\",\n      \"email\":\"\",\n      \"url\":\"http:\\/\\/www.klia.com.my\\/\",\n      \"runway_length\":\"4000\",\n      \"elev\":null,\n      \"icao\":\"WMKK\",\n      \"direct_flights\":\"101\",\n      \"carriers\":\"68\"\n   },\n   {\n      \"code\":\"LAS\",\n      \"lat\":\"36.0806\",\n      \"lon\":\"-115.143\",\n      \"name\":\"Mccarran International Airport\",\n      \"city\":\"Las Vegas\",\n      \"state\":\"Nevada\",\n      \"country\":\"United States\",\n      \"woeid\":\"12520849\",\n      \"tz\":\"America\\/Los_Angeles\",\n      \"phone\":\"(702) 261-5211\",\n      \"type\":\"Airports\",\n      \"email\":\"\",\n      \"url\":\"http:\\/\\/www.mccarran.com\",\n      \"runway_length\":\"12636\",\n      \"elev\":\"2174\",\n      \"icao\":\"KLAS\",\n      \"direct_flights\":\"130\",\n      \"carriers\":\"64\"\n   },\n   {\n      \"code\":\"LAX\",\n      \"lat\":\"33.9456\",\n      \"lon\":\"-118.391\",\n      \"name\":\"Los Angeles International Airport\",\n      \"city\":\"Los Angeles\",\n      \"state\":\"California\",\n      \"country\":\"United States\",\n      \"woeid\":\"12520706\",\n      \"tz\":\"America\\/Los_Angeles\",\n      \"phone\":\"\",\n      \"type\":\"Airports\",\n      \"email\":\"\",\n      \"url\":\"\",\n      \"runway_length\":\"12091\",\n      \"elev\":\"126\",\n      \"icao\":\"KLAX\",\n      \"direct_flights\":\"200\",\n      \"carriers\":\"99\"\n   },\n   {\n      \"code\":\"LED\",\n      \"lat\":\"59.9667\",\n      \"lon\":\"30.3\",\n      \"name\":\"Pulkuvo 2 Airport\",\n      \"city\":\"St. Petersburg\",\n      \"state\":\"St. Peterburg\",\n      \"country\":\"Russia\",\n      \"woeid\":\"12523047\",\n      \"tz\":\"Europe\\/Moscow\",\n      \"phone\":\"\",\n      \"type\":\"Airports\",\n      \"email\":\"\",\n      \"url\":\"\",\n      \"runway_length\":\"11155\",\n      \"elev\":\"59\",\n      \"icao\":\"ULLI\",\n      \"direct_flights\":\"121\",\n      \"carriers\":\"58\"\n   },\n   {\n      \"code\":\"LGW\",\n      \"lat\":\"51.1568\",\n      \"lon\":\"-0.16988\",\n      \"name\":\"London Gatwick Airport\",\n      \"city\":\"Horley\",\n      \"state\":\"England\",\n      \"country\":\"United Kingdom\",\n      \"woeid\":\"23387567\",\n      \"tz\":\"Europe\\/London\",\n      \"phone\":\"0870 000 2468\",\n      \"type\":\"Airports\",\n      \"email\":\"\",\n      \"url\":\"http:\\/\\/www.gatwickairport.com\\/\",\n      \"runway_length\":\"10364\",\n      \"elev\":\"202\",\n      \"icao\":\"\",\n      \"direct_flights\":\"227\",\n      \"carriers\":\"71\"\n   },\n   {\n      \"code\":\"LHR\",\n      \"lat\":\"51.4703\",\n      \"lon\":\"-0.45342\",\n      \"name\":\"London Heathrow Airport\",\n      \"city\":\"Hounslow\",\n      \"state\":\"England\",\n      \"country\":\"United Kingdom\",\n      \"woeid\":\"23382429\",\n      \"tz\":\"Europe\\/London\",\n      \"phone\":\"+44 (0)8700 000698\",\n      \"type\":\"Airports\",\n      \"email\":\"\",\n      \"url\":\"http:\\/\\/www.heathrowairport.com\",\n      \"runway_length\":\"12802\",\n      \"elev\":\"80\",\n      \"icao\":\"EGLL\",\n      \"direct_flights\":\"227\",\n      \"carriers\":\"105\"\n   },\n   {\n      \"code\":\"LUX\",\n      \"lat\":\"49.6269\",\n      \"lon\":\"6.20685\",\n      \"name\":\"Luxembourg Airport\",\n      \"city\":\"Sandweiler\",\n      \"state\":\"Luxemburg\",\n      \"country\":\"Luxembourg\",\n      \"woeid\":\"12514635\",\n      \"tz\":\"Europe\\/Luxembourg\",\n      \"phone\":\"+352 2464 1\",\n      \"type\":\"Airports\",\n      \"email\":\"\",\n      \"url\":\"http:\\/\\/www.luxair.lu\",\n      \"runway_length\":\"13123\",\n      \"elev\":\"1234\",\n      \"icao\":\"ELLX\",\n      \"direct_flights\":\"119\",\n      \"carriers\":\"29\"\n   },\n   {\n      \"code\":\"MAD\",\n      \"lat\":\"40.4684\",\n      \"lon\":\"-3.56769\",\n      \"name\":\"Barajas Airport\",\n      \"city\":\"Madrid\",\n      \"state\":\"Madrid\",\n      \"country\":\"Spain\",\n      \"woeid\":\"12517539\",\n      \"tz\":\"Europe\\/Madrid\",\n      \"phone\":\"00 34 902 404 704\",\n      \"type\":\"Airports\",\n      \"email\":\"\",\n      \"url\":\"\",\n      \"runway_length\":\"13451\",\n      \"elev\":\"1998\",\n      \"icao\":\"LEMD\",\n      \"direct_flights\":\"186\",\n      \"carriers\":\"93\"\n   },\n   {\n      \"code\":\"MAN\",\n      \"lat\":\"53.365\",\n      \"lon\":\"-2.27089\",\n      \"name\":\"Manchester International Airport\",\n      \"city\":\"Manchester\",\n      \"state\":\"England\",\n      \"country\":\"United Kingdom\",\n      \"woeid\":\"22478032\",\n      \"tz\":\"Europe\\/London\",\n      \"phone\":\"+44 (0) 161 489 3000\",\n      \"type\":\"Airports\",\n      \"email\":\"\",\n      \"url\":\"http:\\/\\/www.manchesterairport.co.uk\",\n      \"runway_length\":\"10000\",\n      \"elev\":\"256\",\n      \"icao\":\"EGCC\",\n      \"direct_flights\":\"129\",\n      \"carriers\":\"79\"\n   },\n   {\n      \"code\":\"MCO\",\n      \"lat\":\"28.4418\",\n      \"lon\":\"-81.3115\",\n      \"name\":\"Orlando International Airport\",\n      \"city\":\"Orlando\",\n      \"state\":\"Florida\",\n      \"country\":\"United States\",\n      \"woeid\":\"12521243\",\n      \"tz\":\"America\\/New_York\",\n      \"phone\":\"\",\n      \"type\":\"Airports\",\n      \"email\":\"\",\n      \"url\":\"\",\n      \"runway_length\":\"12004\",\n      \"elev\":\"96\",\n      \"icao\":\"KMCO\",\n      \"direct_flights\":\"106\",\n      \"carriers\":\"63\"\n   },\n   {\n      \"code\":\"MIA\",\n      \"lat\":\"25.7953\",\n      \"lon\":\"-80.2727\",\n      \"name\":\"Miami International Airport\",\n      \"city\":\"Miami\",\n      \"state\":\"Florida\",\n      \"country\":\"United States\",\n      \"woeid\":\"12520923\",\n      \"tz\":\"America\\/New_York\",\n      \"phone\":\"(305) 876-7000\",\n      \"type\":\"Airports\",\n      \"email\":\"customerservice@miami-airport.com\",\n      \"url\":\"http:\\/\\/www.miami-airport.com\",\n      \"runway_length\":\"13000\",\n      \"elev\":\"11\",\n      \"icao\":\"KMIA\",\n      \"direct_flights\":\"167\",\n      \"carriers\":\"91\"\n   },\n   {\n      \"code\":\"MSP\",\n      \"lat\":\"44.8793\",\n      \"lon\":\"-93.1987\",\n      \"name\":\"Minneapolis St Paul International Airport\",\n      \"city\":\"St. Paul\",\n      \"state\":\"Minnesota\",\n      \"country\":\"United States\",\n      \"woeid\":\"12520966\",\n      \"tz\":\"America\\/Chicago\",\n      \"phone\":\"\",\n      \"type\":\"Airports\",\n      \"email\":\"\",\n      \"url\":\"http:\\/\\/mspairport.com\",\n      \"runway_length\":\"11006\",\n      \"elev\":\"841\",\n      \"icao\":\"KMSP\",\n      \"direct_flights\":\"171\",\n      \"carriers\":\"41\"\n   },\n   {\n      \"code\":\"MUC\",\n      \"lat\":\"48.354\",\n      \"lon\":\"11.7816\",\n      \"name\":\"Franz-Josef-Strauss Airport\",\n      \"city\":\"Oberding\",\n      \"state\":\"Bavaria\",\n      \"country\":\"Germany\",\n      \"woeid\":\"22923040\",\n      \"tz\":\"Europe\\/Berlin\",\n      \"phone\":\"\",\n      \"type\":\"Airports\",\n      \"email\":\"\",\n      \"url\":\"http:\\/\\/www.munich-airport.de\\/\",\n      \"runway_length\":\"13100\",\n      \"elev\":\"1737\",\n      \"icao\":\"EDDM\",\n      \"direct_flights\":\"213\",\n      \"carriers\":\"95\"\n   },\n   {\n      \"code\":\"MXP\",\n      \"lat\":\"45.6314\",\n      \"lon\":\"8.72284\",\n      \"name\":\"Malpensa International Airport\",\n      \"city\":\"Cardano al Campo\",\n      \"state\":\"Lombardy\",\n      \"country\":\"Italy\",\n      \"woeid\":\"22306432\",\n      \"tz\":\"Europe\\/Rome\",\n      \"phone\":\"\",\n      \"type\":\"Airports\",\n      \"email\":\"\",\n      \"url\":\"http:\\/\\/www.sea-aeroportimilano.it\\/\",\n      \"runway_length\":\"12844\",\n      \"elev\":\"768\",\n      \"icao\":\"LIMC\",\n      \"direct_flights\":\"163\",\n      \"carriers\":\"109\"\n   },\n   {\n      \"code\":\"ORD\",\n      \"lat\":\"41.9796\",\n      \"lon\":\"-87.8825\",\n      \"name\":\"Chicago O'Hare International Airport\",\n      \"city\":\"Chicago\",\n      \"state\":\"Illinois\",\n      \"country\":\"United States\",\n      \"woeid\":\"12521200\",\n      \"tz\":\"America\\/Chicago\",\n      \"phone\":\"\",\n      \"type\":\"Airports\",\n      \"email\":\"\",\n      \"url\":\"http:\\/\\/www.flychicago.com\\/ohare\\/home.asp\",\n      \"runway_length\":\"13000\",\n      \"elev\":\"668\",\n      \"icao\":\"KORD\",\n      \"direct_flights\":\"222\",\n      \"carriers\":\"85\"\n   },\n   {\n      \"code\":\"ORY\",\n      \"lat\":\"48.7261\",\n      \"lon\":\"2.36411\",\n      \"name\":\"Paris Orly Airport\",\n      \"city\":\"Paris\",\n      \"state\":\"Ile-de-France\",\n      \"country\":\"France\",\n      \"woeid\":\"22144181\",\n      \"tz\":\"Europe\\/Paris\",\n      \"phone\":\"\",\n      \"type\":\"Airports\",\n      \"email\":\"\",\n      \"url\":\"http:\\/\\/www.adp.fr\",\n      \"runway_length\":\"11975\",\n      \"elev\":\"292\",\n      \"icao\":\"LFPO\",\n      \"direct_flights\":\"138\",\n      \"carriers\":\"52\"\n   },\n   {\n      \"code\":\"OSL\",\n      \"lat\":\"60.1947\",\n      \"lon\":\"11.1005\",\n      \"name\":\"Oslo Gardermoen Airport\",\n      \"city\":\"Gardermoen\",\n      \"state\":\"Akershus Fylke\",\n      \"country\":\"Norway\",\n      \"woeid\":\"12515119\",\n      \"tz\":\"Europe\\/Oslo\",\n      \"phone\":\"+47 64812000\",\n      \"type\":\"Airports\",\n      \"email\":\"\",\n      \"url\":\"http:\\/\\/www.osl.no\",\n      \"runway_length\":\"11811\",\n      \"elev\":\"681\",\n      \"icao\":\"ENGM\",\n      \"direct_flights\":\"116\",\n      \"carriers\":\"59\"\n   },\n   {\n      \"code\":\"PEK\",\n      \"lat\":\"40.0724\",\n      \"lon\":\"116.583\",\n      \"name\":\"Beijing Capital Airport\",\n      \"city\":\"Shunyi\",\n      \"state\":\"Beijing\",\n      \"country\":\"China\",\n      \"woeid\":\"12511989\",\n      \"tz\":\"Asia\\/Shanghai\",\n      \"phone\":\"\",\n      \"type\":\"Airports\",\n      \"email\":\"\",\n      \"url\":\"http:\\/\\/www.bcia.com.cn\",\n      \"runway_length\":\"12467\",\n      \"elev\":\"115\",\n      \"icao\":\"ZBAA\",\n      \"direct_flights\":\"165\",\n      \"carriers\":\"84\"\n   },\n   {\n      \"code\":\"PHL\",\n      \"lat\":\"39.8768\",\n      \"lon\":\"-75.2419\",\n      \"name\":\"Philadelphia International Airport\",\n      \"city\":\"Philadelphia\",\n      \"state\":\"Pennsylvania\",\n      \"country\":\"United States\",\n      \"woeid\":\"12521360\",\n      \"tz\":\"America\\/New_York\",\n      \"phone\":\"\",\n      \"type\":\"Airports\",\n      \"email\":\"\",\n      \"url\":\"http:\\/\\/www.phl.org\",\n      \"runway_length\":\"10500\",\n      \"elev\":\"21\",\n      \"icao\":\"KPHL\",\n      \"direct_flights\":\"133\",\n      \"carriers\":\"51\"\n   },\n   {\n      \"code\":\"PHX\",\n      \"lat\":\"33.4376\",\n      \"lon\":\"-112.03\",\n      \"name\":\"Sky Harbor International Airport\",\n      \"city\":\"Phoenix\",\n      \"state\":\"Arizona\",\n      \"country\":\"United States\",\n      \"woeid\":\"12521872\",\n      \"tz\":\"America\\/Phoenix\",\n      \"phone\":\"\",\n      \"type\":\"Airports\",\n      \"email\":\"\",\n      \"url\":\"http:\\/\\/phoenix.gov\\/Ahttp:\\/\\/phoenix.gov\\/aviation\",\n      \"runway_length\":\"11001\",\n      \"elev\":\"1132\",\n      \"icao\":\"KPHX\",\n      \"direct_flights\":\"108\",\n      \"carriers\":\"51\"\n   },\n   {\n      \"code\":\"PMI\",\n      \"lat\":\"39.5495\",\n      \"lon\":\"2.73188\",\n      \"name\":\"Palma de Mallorca Airport\",\n      \"city\":\"Palma\",\n      \"state\":\"Balearic Islands\",\n      \"country\":\"Spain\",\n      \"woeid\":\"23281165\",\n      \"tz\":\"Europe\\/Madrid\",\n      \"phone\":\"\",\n      \"type\":\"Airports\",\n      \"email\":\"\",\n      \"url\":\"\",\n      \"runway_length\":\"10728\",\n      \"elev\":\"15\",\n      \"icao\":\"LEPA\",\n      \"direct_flights\":\"109\",\n      \"carriers\":\"57\"\n   },\n   {\n      \"code\":\"PRG\",\n      \"lat\":\"50.1079\",\n      \"lon\":\"14.2675\",\n      \"name\":\"Prague Ruzyne Airport\",\n      \"city\":\"Prague 6\",\n      \"state\":\"Hlavni mesto Praha\",\n      \"country\":\"Czech Republic\",\n      \"woeid\":\"12512558\",\n      \"tz\":\"Europe\\/Prague\",\n      \"phone\":\"\",\n      \"type\":\"Airports\",\n      \"email\":\"\",\n      \"url\":\"http:\\/\\/www.prg.aero\",\n      \"runway_length\":\"10663\",\n      \"elev\":\"1247\",\n      \"icao\":\"KPRG\",\n      \"direct_flights\":\"131\",\n      \"carriers\":\"66\"\n   },\n   {\n      \"code\":\"PVG\",\n      \"lat\":\"31.1156\",\n      \"lon\":\"121.803\",\n      \"name\":\"Pudong International Airport\",\n      \"city\":\"Huinan\",\n      \"state\":\"Shanghai\",\n      \"country\":\"China\",\n      \"woeid\":\"23428057\",\n      \"tz\":\"Asia\\/Shanghai\",\n      \"phone\":\"\",\n      \"type\":\"Airports\",\n      \"email\":\"\",\n      \"url\":\"\",\n      \"runway_length\":null,\n      \"elev\":null,\n      \"icao\":\"KPVG\",\n      \"direct_flights\":\"131\",\n      \"carriers\":\"76\"\n   },\n   {\n      \"code\":\"SEA\",\n      \"lat\":\"47.4405\",\n      \"lon\":\"-122.296\",\n      \"name\":\"Tacoma International Airport\",\n      \"city\":\"Seattle\",\n      \"state\":\"Washington\",\n      \"country\":\"United States\",\n      \"woeid\":\"12522066\",\n      \"tz\":\"America\\/Los_Angeles\",\n      \"phone\":\"\",\n      \"type\":\"Airports\",\n      \"email\":\"\",\n      \"url\":\"http:\\/\\/www.portseattle.org\\/seatac\\/\",\n      \"runway_length\":\"11900\",\n      \"elev\":\"429\",\n      \"icao\":\"KSEA\",\n      \"direct_flights\":\"109\",\n      \"carriers\":\"59\"\n   },\n   {\n      \"code\":\"SFO\",\n      \"lat\":\"37.6148\",\n      \"lon\":\"-122.392\",\n      \"name\":\"San Francisco International Airport\",\n      \"city\":\"San Francisco\",\n      \"state\":\"California\",\n      \"country\":\"United States\",\n      \"woeid\":\"12521721\",\n      \"tz\":\"America\\/Los_Angeles\",\n      \"phone\":\"(650) 821-8211\",\n      \"type\":\"Airports\",\n      \"email\":\"\",\n      \"url\":\"http:\\/\\/www.flysfo.com\",\n      \"runway_length\":\"11870\",\n      \"elev\":\"12\",\n      \"icao\":\"KSFO\",\n      \"direct_flights\":\"147\",\n      \"carriers\":\"76\"\n   },\n   {\n      \"code\":\"SIN\",\n      \"lat\":\"1.3578\",\n      \"lon\":\"103.991\",\n      \"name\":\"Singapore Changi Airport\",\n      \"city\":\"Singapore\",\n      \"state\":\"South East\",\n      \"country\":\"Singapore\",\n      \"woeid\":\"12517525\",\n      \"tz\":\"Asia\\/Singapore\",\n      \"phone\":\"(65) 6542 1122\",\n      \"type\":\"Airports\",\n      \"email\":\"\",\n      \"url\":\"http:\\/\\/www.changiairport.com.sg\\/\",\n      \"runway_length\":\"13200\",\n      \"elev\":\"65\",\n      \"icao\":\"WSSS\",\n      \"direct_flights\":\"108\",\n      \"carriers\":\"80\"\n   },\n   {\n      \"code\":\"SLC\",\n      \"lat\":\"40.7862\",\n      \"lon\":\"-111.982\",\n      \"name\":\"Salt Lake City International Airport\",\n      \"city\":\"Salt Lake City\",\n      \"state\":\"Utah\",\n      \"country\":\"United States\",\n      \"woeid\":\"12521709\",\n      \"tz\":\"America\\/Denver\",\n      \"phone\":\"\",\n      \"type\":\"Airports\",\n      \"email\":\"\",\n      \"url\":\"\",\n      \"runway_length\":\"12003\",\n      \"elev\":\"4226\",\n      \"icao\":\"KSLC\",\n      \"direct_flights\":\"104\",\n      \"carriers\":\"38\"\n   },\n   {\n      \"code\":\"STN\",\n      \"lat\":\"51.8894\",\n      \"lon\":\"0.26151\",\n      \"name\":\"London Stansted International Airport\",\n      \"city\":\"Stansted Mountfitchet\",\n      \"state\":\"England\",\n      \"country\":\"United Kingdom\",\n      \"woeid\":\"22489156\",\n      \"tz\":\"Europe\\/London\",\n      \"phone\":\"\",\n      \"type\":\"Airports\",\n      \"email\":\"\",\n      \"url\":\"http:\\/\\/www.stanstedairport.com\\/\",\n      \"runway_length\":\"10000\",\n      \"elev\":\"347\",\n      \"icao\":\"EGSS\",\n      \"direct_flights\":\"168\",\n      \"carriers\":\"25\"\n   },\n   {\n      \"code\":\"STR\",\n      \"lat\":\"48.6895\",\n      \"lon\":\"9.19298\",\n      \"name\":\"Stuttgart Airport\",\n      \"city\":\"Stuttgart\",\n      \"state\":\"Baden-Wurttemberg\",\n      \"country\":\"Germany\",\n      \"woeid\":\"22236827\",\n      \"tz\":\"Europe\\/Berlin\",\n      \"phone\":\"\",\n      \"type\":\"Airports\",\n      \"email\":\"\",\n      \"url\":\"\",\n      \"runway_length\":\"8366\",\n      \"elev\":\"1300\",\n      \"icao\":\"EDDS\",\n      \"direct_flights\":\"116\",\n      \"carriers\":\"51\"\n   },\n   {\n      \"code\":\"SVO\",\n      \"lat\":\"55.9621\",\n      \"lon\":\"37.4189\",\n      \"name\":\"Sheremtyevo Airport\",\n      \"city\":\"Zelenograd\",\n      \"state\":\"Moskovskaya Oblast\",\n      \"country\":\"Russia\",\n      \"woeid\":\"12516860\",\n      \"tz\":\"Europe\\/Moscow\",\n      \"phone\":\"\",\n      \"type\":\"Airports\",\n      \"email\":\"\",\n      \"url\":\"http:\\/\\/www.sheremetyevo-airport.ru\",\n      \"runway_length\":\"12139\",\n      \"elev\":\"623\",\n      \"icao\":\"UUEE\",\n      \"direct_flights\":\"140\",\n      \"carriers\":\"48\"\n   },\n   {\n      \"code\":\"TXL\",\n      \"lat\":\"52.5548\",\n      \"lon\":\"13.289\",\n      \"name\":\"Berlin-Tegel International Airport\",\n      \"city\":\"Berlin\",\n      \"state\":\"Berlin\",\n      \"country\":\"Germany\",\n      \"woeid\":\"22164086\",\n      \"tz\":\"Europe\\/Berlin\",\n      \"phone\":\"0180 5000 186 (0,12 Euro\",\n      \"type\":\"Airports\",\n      \"email\":\"\",\n      \"url\":\"http:\\/\\/www.berlin-airport.de\\/PubEnglish\\/PubTegel\\/index.php?\",\n      \"runway_length\":\"9918\",\n      \"elev\":\"121\",\n      \"icao\":\"EDDT\",\n      \"direct_flights\":\"101\",\n      \"carriers\":\"70\"\n   },\n   {\n      \"code\":\"VIE\",\n      \"lat\":\"48.1036\",\n      \"lon\":\"16.5804\",\n      \"name\":\"Vienna Schwechat International Airport\",\n      \"city\":\"Klein-Neusiedl\",\n      \"state\":\"Lower Austria\",\n      \"country\":\"Austria\",\n      \"woeid\":\"22022012\",\n      \"tz\":\"Europe\\/Vienna\",\n      \"phone\":\"\",\n      \"type\":\"Airports\",\n      \"email\":\"\",\n      \"url\":\"http:\\/\\/www.viennaairport.com\",\n      \"runway_length\":\"11811\",\n      \"elev\":\"600\",\n      \"icao\":\"LOWW\",\n      \"direct_flights\":\"183\",\n      \"carriers\":\"96\"\n   },\n   {\n      \"code\":\"WAW\",\n      \"lat\":\"52.17\",\n      \"lon\":\"20.9725\",\n      \"name\":\"Okecie International Airport\",\n      \"city\":\"Warsaw\",\n      \"state\":\"Mazowieckie\",\n      \"country\":\"Poland\",\n      \"woeid\":\"12515363\",\n      \"tz\":\"Europe\\/Warsaw\",\n      \"phone\":\"+48 (22) 650 42 20\",\n      \"type\":\"Airports\",\n      \"email\":\"\",\n      \"url\":\"http:\\/\\/www.lotnisko-chopina.pl\\/\",\n      \"runway_length\":\"9852\",\n      \"elev\":\"354\",\n      \"icao\":\"EPWA\",\n      \"direct_flights\":\"102\",\n      \"carriers\":\"60\"\n   },\n   {\n      \"code\":\"YUL\",\n      \"lat\":\"45.4562\",\n      \"lon\":\"-73.7473\",\n      \"name\":\"Aéroport International Pierre-Elliott-Trudeau d\",\n      \"city\":\"Dorval\",\n      \"state\":\"Quebec\",\n      \"country\":\"Canada\",\n      \"woeid\":\"12511638\",\n      \"tz\":\"America\\/Toronto\",\n      \"phone\":\"514 394 7377\",\n      \"type\":\"Airports\",\n      \"email\":\"\",\n      \"url\":\"http:\\/\\/www.admtl.com\",\n      \"runway_length\":\"11000\",\n      \"elev\":\"117\",\n      \"icao\":\"CYUL\",\n      \"direct_flights\":\"104\",\n      \"carriers\":\"57\"\n   },\n   {\n      \"code\":\"YYZ\",\n      \"lat\":\"43.685\",\n      \"lon\":\"-79.6142\",\n      \"name\":\"Toronto Lester B Pearson International Airport\",\n      \"city\":\"Mississauga\",\n      \"state\":\"Ontario\",\n      \"country\":\"Canada\",\n      \"woeid\":\"12511883\",\n      \"tz\":\"America\\/Toronto\",\n      \"phone\":\"\",\n      \"type\":\"Airports\",\n      \"email\":\"\",\n      \"url\":\"http:\\/\\/www.gtaa.com\\/\",\n      \"runway_length\":\"11120\",\n      \"elev\":\"569\",\n      \"icao\":\"CYYZ\",\n      \"direct_flights\":\"176\",\n      \"carriers\":\"66\"\n   },\n   {\n      \"code\":\"ZRH\",\n      \"lat\":\"47.454\",\n      \"lon\":\"8.56137\",\n      \"name\":\"Zurich International Airport\",\n      \"city\":\"Kloten\",\n      \"state\":\"Canton of Zurich\",\n      \"country\":\"Switzerland\",\n      \"woeid\":\"22442771\",\n      \"tz\":\"Europe\\/Zurich\",\n      \"phone\":\"+41 43 816 22 11\",\n      \"type\":\"Airports\",\n      \"email\":\"\",\n      \"url\":\"http:\\/\\/www.zurich-airport.com\",\n      \"runway_length\":\"12139\",\n      \"elev\":\"1416\",\n      \"icao\":\"LSZH\",\n      \"direct_flights\":\"161\",\n      \"carriers\":\"79\"\n   }\n]\n")

            val filteredAirports = JSONArray()

            val jsonArray = JSONArray(getTextFromStream(input))
            for (i in 0 until jsonArray.length()) {
                val airportJson = jsonArray.getJSONObject(i)
                if (airportJson.optInt("direct_flights", 0) > 100) {
                    filteredAirports.put(airportJson)
                }
            }

            _saveData(filteredAirports.toString().toByteArray(), "tempJson")
        }
    }
}